<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Unicorn Library: Core Definitions</title>
	<link type="text/css" rel="stylesheet" href="style.css"/>
</head>
<body>

<h1 id="unicornlibrary:coredefinitions"><a href="index.html">Unicorn Library</a>: Core Definitions</h1>

<h4 id="unicodelibraryforcbyrosssmith">Unicode library for C++ by Ross Smith</h4>

<h4 id="includeunicorncore.hpp"><code>#include &quot;unicorn/core.hpp&quot;</code></h4>

<p>This module provides some common definitions used throughout the library.</p>

<h2 id="contents">Contents</h2>

<ul>
<li><a href="#imports">Imports</a></li>
<li><a href="#exceptions">Exceptions</a></li>
<li><a href="#basiccharactertypes">Basic character types</a></li>
<li><a href="#versioninformation">Version information</a></li>
</ul>

<h2 id="imports">Imports</h2>

<ul>
<li><code>using Crow::<strong>basic_string</strong>      [= std::basic_string]</code></li>
<li><code>using Crow::<strong>string</strong>            [= std::string]</code></li>
<li><code>using Crow::<strong>u8string</strong>          [= std::string]</code></li>
<li><code>using Crow::<strong>u16string</strong>         [= std::u16string]</code></li>
<li><code>using Crow::<strong>u32string</strong>         [= std::u32string]</code></li>
<li><code>using Crow::<strong>wstring</strong>           [= std::wstring]</code></li>
<li><code>using Crow::<strong>ascii_whitespace</strong>  [= &quot;\t\n\v\f\r &quot;]</code></li>
<li><code>using Crow::<strong>npos</strong>              [= std::string::npos]</code></li>
</ul>

<p>Imported for convenience from the Crow library.</p>

<h2 id="exceptions">Exceptions</h2>

<ul>
<li><code>class <strong>InitializationError</strong>: public std::runtime_error</code></li>
</ul>

<p>An abstract base class for internal errors that may happen while loading the
Unicode tables used by certain functions. Functions that can throw exceptions
derived from this are individually documented.</p>

<ul>
<li><code>class <strong>EncodingError</strong>: public std::runtime_error</code>

<ul>
<li><code>EncodingError::<strong>EncodingError</strong>()</code></li>
<li><code>explicit EncodingError::<strong>EncodingError</strong>(const u8string&amp; encoding, size_t offset = 0)</code></li>
<li><code>template &lt;typename C&gt; EncodingError::<strong>EncodingError</strong>(const u8string&amp; encoding, size_t offset, const C* ptr, size_t n = 1)</code></li>
<li><code>const char* EncodingError::<strong>encoding</strong>() noexcept const</code></li>
<li><code>size_t EncodingError::<strong>offset</strong>() const noexcept</code></li>
</ul></li>
</ul>

<p>An exception thrown to indicate a text encoding error encountered when
converting a string from one encoding to another, or when checking an encoded
string for validity. The offset of the offending data within the source string
(when available) can be retrieved through the <code>offset()</code> method. If possible,
a hexadecimal representation of the offending data will be included in the
error message.</p>

<h2 id="basiccharactertypes">Basic character types</h2>

<ul>
<li><code>#define <strong>UNICORN_NATIVE_WCHAR</strong> 1</code></li>
</ul>

<p>Defined if the operating system&#8217;s native API uses wide character strings (this
is currently defined only for native Windows builds).</p>

<ul>
<li><code>#define <strong>UNICORN_WCHAR_UTF16</strong> 1</code></li>
<li><code>#define <strong>UNICORN_WCHAR_UTF32</strong> 1</code></li>
</ul>

<p>One of these is defined to indicate which UTF encoding the system&#8217;s <code>wstring</code>
class uses.</p>

<ul>
<li><code>template &lt;typename C&gt; struct <strong>IsCharacterType</strong></code>

<ul>
<li><code>static constexpr bool IsCharacterType::<strong>value</strong></code></li>
</ul></li>
</ul>

<p>The <code>value</code> flag is true if <code>C</code> is one of the character types recognized by
the Unicorn library (<code>char</code>, <code>char16_t</code>, <code>char32_t</code>, or <code>wchar_t</code>).</p>

<ul>
<li><code>using <strong>NativeCharacter</strong> = [char on Unix, wchar_t on Windows]</code></li>
<li><code>using <strong>NativeString</strong> = [string on Unix, wstring on Windows]</code></li>
</ul>

<p>These are the character and string types used in the operating system&#8217;s native
ABI.</p>

<ul>
<li><code>using <strong>WcharEquivalent</strong> = [char16_t or char32_t]</code></li>
<li><code>using <strong>WstringEquivalent</strong> = [u16string or u32string]</code></li>
</ul>

<p>These are defined to match the UTF encoding of the system&#8217;s <code>wstring</code> class.</p>

<ul>
<li><code>namespace Literals</code>

<ul>
<li><code>NativeString <strong>operator&quot;&quot; _nat</strong>(const char* s, size_t n)</code></li>
</ul></li>
</ul>

<p>Literal suffix to make it easy to define native string constants. The
implementation on wide character systems assumes that <code>char</code> values can simply
be directly copied into a <code>wchar_t</code>, so this should only be used with simple
ASCII strings; text containing Unicode characters will need separate narrow
and wide character versions.</p>

<h2 id="versioninformation">Version information</h2>

<ul>
<li><code>Crow::Version <strong>unicorn_version</strong>() noexcept</code></li>
<li><code>Crow::Version <strong>unicode_version</strong>() noexcept</code></li>
</ul>

<p>These return the version of the Unicorn library and the supported version of
the Unicode standard.</p>

</body>
</html>
